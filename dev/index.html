<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · Geodynamo.jl</title><meta name="title" content="Home · Geodynamo.jl"/><meta property="og:title" content="Home · Geodynamo.jl"/><meta property="twitter:title" content="Home · Geodynamo.jl"/><meta name="description" content="Documentation for Geodynamo.jl."/><meta property="og:description" content="Documentation for Geodynamo.jl."/><meta property="twitter:description" content="Documentation for Geodynamo.jl."/><meta property="og:url" content="https://subhk.github.io/Geodynamo.jl/stable/"/><meta property="twitter:url" content="https://subhk.github.io/Geodynamo.jl/stable/"/><link rel="canonical" href="https://subhk.github.io/Geodynamo.jl/stable/"/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>Geodynamo.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a><ul class="internal"><li><a class="tocitem" href="#Why-Geodynamo.jl?"><span>Why Geodynamo.jl?</span></a></li><li><a class="tocitem" href="#Architecture-Overview"><span>Architecture Overview</span></a></li><li><a class="tocitem" href="#Governing-Equations"><span>Governing Equations</span></a></li><li><a class="tocitem" href="#Documentation-Map"><span>Documentation Map</span></a></li><li><a class="tocitem" href="#Cite-and-Support"><span>Cite &amp; Support</span></a></li><li><a class="tocitem" href="#Release-Cadence-and-Support-Matrix"><span>Release Cadence &amp; Support Matrix</span></a></li></ul></li><li><a class="tocitem" href="getting-started/">Getting Started</a></li><li><a class="tocitem" href="configuration/">Configuration</a></li><li><a class="tocitem" href="timestepping/">Time Integration</a></li><li><a class="tocitem" href="io/">Data Output</a></li><li><a class="tocitem" href="developer/">Developer Guide</a></li><li><a class="tocitem" href="api/">API Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/subhk/Geodynamo.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/subhk/Geodynamo.jl/blob/main/docs/src/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Geodynamo.jl"><a class="docs-heading-anchor" href="#Geodynamo.jl">Geodynamo.jl</a><a id="Geodynamo.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Geodynamo.jl" title="Permalink"></a></h1><blockquote><p>High-performance spherical-MHD solver for geodynamo and planetary-core studies built on SHTnsKit and PencilArrays</p></blockquote><p>Geodynamo.jl couples spectral spherical-harmonic transforms with domain-decomposed finite-difference operators to evolve the governing magnetohydrodynamic (MHD) equations for rapidly rotating planetary interiors. The code targets multi-node simulations, supports mixed toroidal/poloidal representations, and provides a modern Julia interface for extending dynamo studies.</p><h2 id="Why-Geodynamo.jl?"><a class="docs-heading-anchor" href="#Why-Geodynamo.jl?">Why Geodynamo.jl?</a><a id="Why-Geodynamo.jl?-1"></a><a class="docs-heading-anchor-permalink" href="#Why-Geodynamo.jl?" title="Permalink"></a></h2><ul><li><strong>End-to-end MHD pipeline</strong> – temperature, composition, velocity, and magnetic sub-systems are advanced in a single, tightly coupled solver.</li><li><strong>Hybrid spectral–radial discretisation</strong> – SHTnsKit supplies fast spherical harmonics while pencil-decomposed finite differences handle radial terms.</li><li><strong>Time integration options</strong> – CNAB2 IMEX, exponential AB2 (EAB2), and exponential RK2 (ERK2) schemes with Krylov-based linear operators.</li><li><strong>MPI-friendly I/O</strong> – each rank owns its checkpoint/output files with selectable precision (Float32/Float64) and NetCDF metadata.</li><li><strong>Composable Julia design</strong> – the module exposes field constructors, transform utilities, and workflow helpers for custom studies.</li></ul><h2 id="Architecture-Overview"><a class="docs-heading-anchor" href="#Architecture-Overview">Architecture Overview</a><a id="Architecture-Overview-1"></a><a class="docs-heading-anchor-permalink" href="#Architecture-Overview" title="Permalink"></a></h2><p>The main pieces of the package are:</p><ul><li><strong>SHTnsKit transforms</strong> (<code>shtnskit_transforms.jl</code>) – wraps the SHTnsKit grid, FFT plans, and transpose operators.</li><li><strong>Field abstractions</strong> (<code>fields.jl</code>) – PencilArray-backed spectral and physical fields with boundary metadata.</li><li><strong>Time integration</strong> (<code>timestep.jl</code>) – shared Krylov utilities, ETD caches, implicit solvers, and step orchestration helpers.</li><li><strong>Physics kernels</strong> (<code>velocity.jl</code>, <code>magnetic.jl</code>, <code>thermal.jl</code>, <code>compositional.jl</code>) – compute nonlinear terms, boundary corrections, and diagnostics.</li><li><strong>Simulation driver</strong> (<code>simulation.jl</code>) – assembles components into <code>SimulationState</code>, manages timestepping, and coordinates output.</li><li><strong>I/O layer</strong> (<code>outputs_writer.jl</code>) – NetCDF writer with rank-scoped filenames, precision controls, and restart handling.</li></ul><h3 id="Required-Dependencies"><a class="docs-heading-anchor" href="#Required-Dependencies">Required Dependencies</a><a id="Required-Dependencies-1"></a><a class="docs-heading-anchor-permalink" href="#Required-Dependencies" title="Permalink"></a></h3><table><tr><th style="text-align: right">Layer</th><th style="text-align: right">Library</th><th style="text-align: right">Responsibility</th></tr><tr><td style="text-align: right">Message passing</td><td style="text-align: right"><a href="https://github.com/JuliaParallel/MPI.jl">MPI.jl</a></td><td style="text-align: right">Communicator management, collective reductions.</td></tr><tr><td style="text-align: right">Pencil decomposition</td><td style="text-align: right"><a href="https://github.com/chriselrod/PencilArrays.jl">PencilArrays.jl</a> &amp; <a href="https://github.com/chriselrod/PencilFFTs.jl">PencilFFTs.jl</a></td><td style="text-align: right">Domain decomposition, transpose plans, distributed FFTs.</td></tr><tr><td style="text-align: right">Spherical harmonics</td><td style="text-align: right"><a href="https://github.com/subhk/SHTnsKit.jl">SHTnsKit.jl</a></td><td style="text-align: right">Gauss grids, spectral transforms, cached Legendre tables.</td></tr><tr><td style="text-align: right">I/O</td><td style="text-align: right"><a href="https://github.com/JuliaGeo/NetCDF.jl">NetCDF.jl</a> &amp; <a href="https://github.com/JuliaIO/HDF5.jl">HDF5.jl</a></td><td style="text-align: right">Structured output, restart files, metadata.</td></tr></table><p>These dependencies are pulled in automatically via the package manifest. You only need a working MPI implementation and NetCDF C libraries at runtime.</p><h2 id="Governing-Equations"><a class="docs-heading-anchor" href="#Governing-Equations">Governing Equations</a><a id="Governing-Equations-1"></a><a class="docs-heading-anchor-permalink" href="#Governing-Equations" title="Permalink"></a></h2><p>The solver advances the nondimensional Boussinesq MHD system presented in Sreenivasan &amp; Kar, <em>Phys. Rev. Fluids</em> <strong>9</strong>, 093801 (2024), Eqs. (1)–(4). In magnetic-diffusion units the equations read</p><p class="math-container">\[\begin{aligned}
\frac{E}{\mathrm{Pm}}\frac{\partial \boldsymbol{u}}{\partial t}
  + (\nabla \times \boldsymbol{u}) \times \boldsymbol{u}
  + \hat{\boldsymbol{z}} \times \boldsymbol{u}
  &amp;= -\nabla p^\star
     + \frac{\mathrm{Pm}}{\mathrm{Pr}}\,\mathrm{Ra}\,T\,\boldsymbol{r}
     + (\nabla \times \boldsymbol{B}) \times \boldsymbol{B}
     + E \nabla^2 \boldsymbol{u}, \\
\frac{\partial T}{\partial t} + \boldsymbol{u} \cdot \nabla T
  &amp;= \frac{\mathrm{Pm}}{\mathrm{Pr}} \nabla^2 T, \\
\frac{\partial \boldsymbol{B}}{\partial t}
  &amp;= \nabla \times (\boldsymbol{u} \times \boldsymbol{B}) + \nabla^2 \boldsymbol{B}, \\
\nabla \cdot \boldsymbol{u} &amp;= \nabla \cdot \boldsymbol{B} = 0.
\end{aligned}\]</p><p>Internally we divide the momentum equation by <code>E/Pm</code>, so the CNAB2/ERK2/EAB2 integrators work with a unit mass matrix and a viscous operator scaled by <code>Pm</code>. Thermal and compositional diffusion use <code>(Pm/Pr)</code> and <code>(Pm/Sc)</code> respectively, while the induction equation diffuses with unit coefficient.</p><p>The solver stores both velocity and magnetic fields in a <strong>toroidal–poloidal decomposition</strong>, which enforces <code>∇·u = ∇·B = 0</code> spectrally. Each timestep reconstructs physical-space vectors through SHTnsKit transforms, evaluates nonlinear terms, and projects back to toroidal/poloidal coefficients before applying the implicit diffusive operators above.</p><h2 id="Documentation-Map"><a class="docs-heading-anchor" href="#Documentation-Map">Documentation Map</a><a id="Documentation-Map-1"></a><a class="docs-heading-anchor-permalink" href="#Documentation-Map" title="Permalink"></a></h2><p>The remainder of the docs walk you through the typical workflow:</p><ul><li><a href="getting-started/">Getting Started</a> – installation, verifying the build, running the quick example.</li><li><a href="configuration/">Configuration &amp; Parameters</a> – how <code>GeodynamoParameters</code> map to grids, physics, and timestepping.</li><li><a href="timestepping/">Time Integration</a> – CNAB2, EAB2, and ERK2 schemes, caches, and recommended settings.</li><li><a href="io/">Data Output &amp; Restart Files</a> – per-rank NetCDF layout, precision control, diagnostics, and boundary datasets.</li><li><a href="api/">API Reference</a> – automatically generated index of exported types and functions.</li><li><a href="developer/">Developer Guide</a> – project layout, testing, documentation build, and contribution guidelines.</li></ul><p>If you are familiar with SHTnsKit itself, skim the configuration guide and jump straight to the timestepping section. Otherwise, start with <a href="getting-started/">Getting Started</a> to ensure the MPI/SHTnsKit toolchain is correctly configured.</p><h2 id="Cite-and-Support"><a class="docs-heading-anchor" href="#Cite-and-Support">Cite &amp; Support</a><a id="Cite-and-Support-1"></a><a class="docs-heading-anchor-permalink" href="#Cite-and-Support" title="Permalink"></a></h2><p>If Geodynamo.jl supports your research, please cite the repository and consider opening an issue or PR with improvements. Community feedback is the fastest way to expand the physics modules and add new diagnostic hooks.</p><h2 id="Release-Cadence-and-Support-Matrix"><a class="docs-heading-anchor" href="#Release-Cadence-and-Support-Matrix">Release Cadence &amp; Support Matrix</a><a id="Release-Cadence-and-Support-Matrix-1"></a><a class="docs-heading-anchor-permalink" href="#Release-Cadence-and-Support-Matrix" title="Permalink"></a></h2><table><tr><th style="text-align: right">Branch</th><th style="text-align: right">Status</th><th style="text-align: right">Julia</th><th style="text-align: right">Notes</th></tr><tr><td style="text-align: right"><code>main</code></td><td style="text-align: right">active development</td><td style="text-align: right">1.10–1.11</td><td style="text-align: right">Latest features, documentation builds on each push.</td></tr><tr><td style="text-align: right">release tags</td><td style="text-align: right">snapshots</td><td style="text-align: right">1.10</td><td style="text-align: right">Stable checkpoints for published results.</td></tr></table><p>We run CI on Linux (OpenMPI) and macOS (MPICH). Contributions targeting other MPI distributions are welcome—check <a href="developer/">Developer Guide</a> for instructions on adding regression tests.</p></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="getting-started/">Getting Started »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Wednesday 15 October 2025 14:42">Wednesday 15 October 2025</span>. Using Julia version 1.11.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
